#!/usr/bin/env bash

echo "ğŸš€ CueTimer Pre-commit Checks Starting..."

# Check for staged frontend files and run lint-staged
if git diff --cached --name-only | grep -qE "\.(ts|tsx|js|jsx|css|scss|less|json|md|mdx)$"; then
    echo "ğŸ“ Running frontend checks..."

    echo "  ğŸ“ Running lint-staged..."
    bunx lint-staged || {
        echo "âŒ Lint-staged failed - fix errors before committing"
        exit 1
    }

    echo "  ğŸ“ Running TypeScript type checking..."
    bun run type-check || {
        echo "âŒ TypeScript type checking failed - fix type errors before committing"
        exit 1
    }
fi

echo "âœ… All pre-commit checks passed!"
